[
  {
    "type": "JOIN_REQUEST",
    "name": "User Onboarding Workflow",
    "description": "Workflow to onboard a new member, including identity verification, policy acceptance, approval, and account creation.",
    "fields": [
      "firstName",
      "lastName",
      "email",
      "dialCode",
      "mobileNumber",
      "hometown",
      "howDoUKnowAboutNabarun"
    ],
    "preCreationTasks": [
      {
        "taskId": "check-duplicate-user",
        "type": "AUTOMATIC",
        "handler": "ngo.nabarun.be.application.handler.task.UserNotRegisteredTaskHandler",
        "description": "Ensure no existing user is registered with the same email address."
      }
    ],
    "steps": [
      {
        "stepId": "verification",
        "name": "Verification & Policy Acceptance",
        "description": "Verify the requester’s details, address any questions, and confirm that the requester understands and accepts Nabarun’s rules, regulations, and policies.",
        "tasks": [
          {
            "taskId": "verify-info",
            "name": "Verify Requester’s Details",
            "description": "Ask the requester to confirm that their email address and other personal details are correct.",
            "type": "VERIFICATION",
            "taskDetail": {
              "assignedTo": {
                "roleGroup": null,
                "roleNames": [
                  "GROUP_COORDINATOR"
                ]
              },
              "isAutoCloseable": false,
              "checklist": [
                "Confirm requester’s email address.",
                "Verify requester’s name and contact details."
              ]
            }
          },
          {
            "taskId": "policy-acceptance",
            "name": "Confirm Policy Acceptance",
            "description": "Explain Nabarun’s rules, regulations, and policies, and confirm that the requester agrees to comply.",
            "type": "VERIFICATION",
            "taskDetail": {
              "assignedTo": {
                "roleGroup": null,
                "roleNames": [
                  "GROUP_COORDINATOR"
                ]
              },
              "isAutoCloseable": false,
              "checklist": [
                "Explain Nabarun’s mission and activities.",
                "Explain Nabarun’s rules and regulations.",
                "Explain the monthly donation scheme.",
                "Review all relevant organizational policies with the requester."
              ]
            }
          }
        ],
        "transitions": {
          "onSuccess": "approval",
          "onFailure": null
        }
      },
      {
        "stepId": "approval",
        "name": "Onboarding Approval",
        "description": "Obtain final approval from authorized leadership before creating the member account.",
        "tasks": [
          {
            "taskId": "verify-approval",
            "name": "President/Secretary Approval",
            "type": "APPROVAL",
            "description": "President or Secretary reviews and approves the onboarding request.",
            "taskDetail": {
              "assignedTo": {
                "roleGroup": null,
                "roleNames": []
              },
              "isAutoCloseable": false,
              "checklist": [
                "Ensure all verification and policy acceptance steps are complete.",
                "Approve the onboarding of the new member."
              ]
            }
          }
        ],
        "transitions": {
          "onSuccess": "account-creation",
          "onFailure": "verification"
        }
      },
      {
        "stepId": "account-creation",
        "name": "Account Creation",
        "description": "Automatically create the user account and assign the appropriate system roles.",
        "tasks": [
          {
            "taskId": "create-auth0-user",
            "name": "Create User Account",
            "type": "AUTOMATIC",
            "handler": "Auth0UserCreationHandler",
            "description": "Create the user in the system and assign base roles."
          }
        ],
        "transitions": {
          "onSuccess": null
        }
      }
    ]
  }
]