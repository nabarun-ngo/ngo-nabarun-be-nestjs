{
  "name": "User Onboarding",
  "description": "Onboard {{firstName}} {{lastName}} to NABARUN.",
  "fields": [
    {
      "key": "firstName",
      "defKey": "firstName",
      "label": "First Name",
      "mandatory": true
    },
    {
      "key": "lastName",
      "defKey": "lastName",
      "label": "Last Name",
      "mandatory": true
    },
    {
      "key": "email",
      "defKey": "email",
      "label": "Email Address",
      "mandatory": true
    },
    {
      "key": "contactNumber",
      "defKey": "contactNumber",
      "label": "Contact Number",
      "mandatory": true
    },
    {
      "key": "hometown",
      "defKey": "hometown",
      "label": "Home Town",
      "mandatory": true
    },
    {
      "key": "howDoUKnowAboutUs",
      "defKey": "howDoUKnowAboutUs",
      "label": "How did the Requester hear about us?",
      "mandatory": false
    }
  ],
  "preCreationTasks": [
    {
      "taskId": "validateinputs",
      "type": "AUTOMATIC",
      "handler": "ValidateInputs",
      "description": ""
    },
    {
      "taskId": "checkduplicateuser",
      "type": "AUTOMATIC",
      "handler": "UserNotRegisteredTaskHandler",
      "description": "Ensure no existing user is registered with the same email address."
    }
  ],
  "steps": [
    {
      "isDefault": true,
      "stepId": "verification",
      "name": "Data Verification and Policy Acceptance",
      "description": "Verify {{firstName}} {{lastName}} data, answer questions, and confirm that the {{firstName}} {{lastName}} understands and accepts Nabarun’s rules, regulations, and policies.",
      "tasks": [
        {
          "taskId": "verifyinfo",
          "name": "Verify {{firstName}} {{lastName}} data",
          "description": "Ask {{firstName}} {{lastName}} to confirm that email address {{lastName}} and other personal details are correct.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Confirm {{firstName}} {{lastName}} email address.",
              "Verify {{firstName}} {{lastName}} name and contact details."
            ],
            "fields": [
              {
                "key": "todosVerified",
                "defKey": "answer",
                "label": "Did you verified all the above ToDos?",
                "mandatory": true
              },
              {
                "key": "correctionNeeded",
                "defKey": "answer",
                "label": "Is there any data correction needed? (if needed, update the remarks field)",
                "mandatory": true
              }
            ]
          }
        },
        {
          "taskId": "policyacceptance",
          "name": "Confirm Policy Acceptance",
          "description": "Explain Nabarun’s Rules & Regulations, and policies, and confirm that the {{firstName}} {{lastName}} agrees to comply.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Explain Nabarun’s Goals, Mission and Activities.",
              "Explain Nabarun’s Rules and Regulations.",
              "Explain the monthly donation scheme.",
              "Send all relevant documents with the {{firstName}} {{lastName}}."
            ],
            "fields": [
              {
                "key": "todosVerified",
                "defKey": "answer",
                "label": "Did you verified all the above ToDos?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_verification_task_verifyinfo.correctionNeeded == 'Yes'",
          "nextStepId": null
        },
        {
          "condition": "step_verification_task_policyacceptance.todosVerified == 'Yes' and step_verification_task_verifyinfo.todosVerified == 'Yes'",
          "nextStepId": "approval"
        },
        {
          "condition": "default",
          "nextStepId": null
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "approval",
      "name": "Onboarding Approval",
      "description": "Obtain final approval from authorized leadership before creating the member account.",
      "tasks": [
        {
          "taskId": "verifyapproval",
          "name": "President/Secretary Approval",
          "type": "APPROVAL",
          "etaHours": 24,
          "description": "President or Secretary reviews and approves the onboarding request.",
          "taskDetail": {
            "assignedTo": {
              "roleGroup": null,
              "roleNames": [
                "PRESIDENT",
                "VICE_PRESIDENT",
                "SECRETARY",
                "ASST_SECRETARY"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Ensure all verification and policy acceptance steps are complete.",
              "Approve the onboarding of the new member."
            ],
            "fields": [
              {
                "key": "decision",
                "defKey": "decision",
                "label": "Do you approve the onboarding of the new member?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_approval_task_verifyapproval.decision == 'APPROVE'",
          "nextStepId": "accountcreation"
        },
        {
          "condition": "default",
          "nextStepId": "approval"
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "accountcreation",
      "name": "Account Creation",
      "description": "Automatically create the user account and assign the appropriate system roles.",
      "tasks": [
        {
          "taskId": "createauth0user",
          "name": "Create User Account",
          "type": "AUTOMATIC",
          "handler": "Auth0UserCreationHandler",
          "description": "Create the user in the system and assign base roles."
        },
        {
          "taskId": "addtowhatsapp",
          "name": "Add {{firstName}} {{lastName}} to NABARUN'S Official WhatsApp Group",
          "description": "Add {{firstName}} {{lastName}} ({{contactNumber}}) to NABARUN'S Official WhatsApp Group.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR",
                "PRESIDENT",
                "VICE_PRESIDENT",
                "SECRETARY",
                "ASST_SECRETARY"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Add {{contactNumber}} to NABARUN'S Official WhatsApp Group."
            ],
            "fields": []
          }
        }
      ],
      "transitions": [
        {
          "condition": "default",
          "nextStepId": null
        }
      ]
    }
  ]
}