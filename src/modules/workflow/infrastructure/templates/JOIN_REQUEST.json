{
  "name": "User Onboarding",
  "description": "Onboard {{firstName}} {{lastName}} to NABARUN.",
  "fields": [
    {
      "key": "firstName",
      "defKey": "INPUT_TEXT_FIELD",
      "label": "First Name",
      "mandatory": true
    },
    {
      "key": "lastName",
      "defKey": "INPUT_TEXT_FIELD",
      "label": "Last Name",
      "mandatory": true
    },
    {
      "key": "email",
      "defKey": "INPUT_EMAIL_FIELD",
      "label": "Email Address",
      "mandatory": true
    },
    {
      "key": "contactNumber",
      "defKey": "INPUT_PHONE_FIELD",
      "label": "Contact Number",
      "mandatory": true
    },
    {
      "key": "hometown",
      "defKey": "INPUT_TEXT_FIELD",
      "label": "Home Town",
      "mandatory": true
    },
    {
      "key": "howDoUKnowAboutUs",
      "defKey": "TEXTAREA_FIELD",
      "label": "How did the Requester hear about us?",
      "mandatory": false
    }
  ],
  "preCreationTasks": [
    {
      "taskId": "validateinputs",
      "type": "AUTOMATIC",
      "handler": "ValidateInputs",
      "description": ""
    },
    {
      "taskId": "checkduplicateuser",
      "type": "AUTOMATIC",
      "handler": "UserNotRegisteredTaskHandler",
      "description": "Ensure no existing user is registered with the same email address."
    }
  ],
  "steps": [
    {
      "isDefault": true,
      "stepId": "verification",
      "name": "Data Verification and Policy Acceptance",
      "description": "Verify {{firstName}} {{lastName}} data, answer questions, and confirm that the {{firstName}} {{lastName}} understands and accepts Nabarun’s rules, regulations, and policies.",
      "tasks": [
        {
          "taskId": "verifyinfo",
          "name": "Verify {{firstName}} {{lastName}} data",
          "description": "Ask {{firstName}} {{lastName}} to confirm that email address {{lastName}} and other personal details are correct.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Confirm {{firstName}} {{lastName}} email address.",
              "Verify {{firstName}} {{lastName}} name and contact details."
            ],
            "fields": [
              {
                "key": "correctionNeeded",
                "defKey": "SELECT_YES_NO_FIELD",
                "label": "Is there any data correction needed? (if needed, update the remarks field with correct data)",
                "mandatory": true
              }
            ]
          }
        },
        {
          "taskId": "policyacceptance",
          "name": "Confirm Policy Acceptance",
          "description": "Explain Nabarun’s Rules & Regulations, and policies, and confirm that the {{firstName}} {{lastName}} agrees to comply.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Explain Nabarun’s Goals, Mission and Activities.",
              "Explain Nabarun’s Rules and Regulations.",
              "Explain the monthly donation scheme.",
              "Send all relevant documents with the {{firstName}} {{lastName}}."
            ],
            "fields": [
              {
                "key": "rulesAccepted",
                "defKey": "SELECT_YES_NO_FIELD",
                "label": "Did requester agree to Nabarun’s Rules & Regulations?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_verification_task_verifyinfo.correctionNeeded == 'Yes' and step_verification_task_policyacceptance.rulesAccepted == 'Yes'",
          "nextStepId": "correction"
        },
        {
          "condition": "step_verification_task_verifyinfo.correctionNeeded == 'Yes' and step_verification_task_policyacceptance.rulesAccepted == 'No'",
          "nextStepId": null
        },
        {
          "condition": "step_verification_task_verifyinfo.correctionNeeded == 'No' and step_verification_task_policyacceptance.rulesAccepted == 'Yes'",
          "nextStepId": "approval"
        },
        {
          "condition": "step_verification_task_verifyinfo.correctionNeeded == 'No' and step_verification_task_policyacceptance.rulesAccepted == 'No'",
          "nextStepId": null
        },
        {
          "condition": "default",
          "nextStepId": "verification"
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "approval",
      "name": "Onboarding Approval",
      "description": "Obtain final approval from authorized leadership before creating the member account.",
      "tasks": [
        {
          "taskId": "verifyapproval",
          "name": "President/Secretary Approval",
          "type": "MANUAL",
          "etaHours": 24,
          "description": "President or Secretary reviews and approves the onboarding request.",
          "taskDetail": {
            "assignedTo": {
              "roleGroup": null,
              "roleNames": [
                "PRESIDENT",
                "VICE_PRESIDENT",
                "SECRETARY",
                "ASST_SECRETARY"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Ensure all verification and policy acceptance steps are complete.",
              "Approve the onboarding of the new member."
            ],
            "fields": [
              {
                "key": "decision",
                "defKey": "SELECT_APPROVE_DECLINE_FIELD",
                "label": "Do you approve the onboarding of the new member?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_approval_task_verifyapproval.decision == 'Approve'",
          "nextStepId": "accountcreation"
        },
        {
          "condition": "step_approval_task_verifyapproval.decision == 'Decline'",
          "nextStepId": null
        },
        {
          "condition": "default",
          "nextStepId": null
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "accountcreation",
      "name": "Account Creation",
      "description": "Automatically create the user account and assign the appropriate system roles.",
      "tasks": [
        {
          "taskId": "createauth0user",
          "name": "Create User Account",
          "type": "AUTOMATIC",
          "handler": "Auth0UserCreationHandler",
          "description": "Create the user in the system and assign base roles."
        },
        {
          "taskId": "addtowhatsapp",
          "name": "Add {{firstName}} {{lastName}} to NABARUN'S Official WhatsApp Group",
          "description": "Add {{firstName}} {{lastName}} ({{contactNumber}}) to NABARUN'S Official WhatsApp Group.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR",
                "PRESIDENT",
                "VICE_PRESIDENT",
                "SECRETARY",
                "ASST_SECRETARY"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Add {{contactNumber}} to NABARUN'S Official WhatsApp Group."
            ],
            "fields": [
              {
                "key": "userAdded",
                "defKey": "SELECT_YES_NO_FIELD",
                "label": "Has this member been added to NABARUN'S Official WhatsApp Group?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_accountcreation_task_addtowhatsapp.userAdded == 'Yes'",
          "nextStepId": null
        },
        {
          "condition": "default",
          "nextStepId": "accountcreation"
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "correction",
      "name": "Data Correction",
      "description": "Correct the data from backend system.",
      "tasks": [
        {
          "taskId": "correctinfo",
          "name": "Correct Data",
          "description": "Correct the provided data from backend system.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "TECHNICAL_SPECIALIST"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Collect the correct data from Workflow Context / From Coordinators / From Member",
              "Update the correct data in the backend system",
              "Notify the member about the correction"
            ],
            "fields": [
              {
                "key": "isCorrected",
                "defKey": "SELECT_YES_NO_FIELD",
                "label": "Has the data been corrected?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "step_correction_task_correctinfo.isCorrected == 'Yes'",
          "nextStepId": "approval"
        },
        {
          "condition": "step_correction_task_correctinfo.isCorrected == 'No'",
          "nextStepId": "correction"
        },
        {
          "condition": "default",
          "nextStepId": "correction"
        }
      ]
    }
  ]
}