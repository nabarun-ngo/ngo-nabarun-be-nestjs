{
  "name": "User Onboarding",
  "description": "Onboard {{requestData.firstName}} {{requestData.lastName}} to NABARUN.",
  "fields": [
    {
      "key": "firstName",
      "label": "First Name",
      "mandatory": true
    },
    {
      "key": "lastName",
      "label": "Last Name",
      "mandatory": true
    },
    {
      "key": "email",
      "label": "Email Address",
      "mandatory": true
    },
    {
      "key": "contactNumber",
      "label": "Contact Number",
      "mandatory": true
    },
    {
      "key": "hometown",
      "label": "Home Town",
      "mandatory": true
    },
    {
      "key": "howDoUKnowAboutUs",
      "label": "How did the Requester hear about us?",
      "mandatory": false
    }
  ],
  "preCreationTasks": [
    {
      "taskId": "validate-inputs",
      "type": "AUTOMATIC",
      "handler": "ValidateInputs",
      "description": ""
    },
    {
      "taskId": "check-duplicate-user",
      "type": "AUTOMATIC",
      "handler": "UserNotRegisteredTaskHandler",
      "description": "Ensure no existing user is registered with the same email address."
    }
  ],
  "steps": [
    {
      "isDefault": true,
      "stepId": "verification",
      "name": "Data Verification and Policy Acceptance",
      "description": "Verify {{requestData.firstName}} {{requestData.lastName}} data, answer questions, and confirm that the {{requestData.firstName}} {{requestData.lastName}} understands and accepts Nabarun’s rules, regulations, and policies.",
      "tasks": [
        {
          "taskId": "verify-info",
          "name": "Verify {{requestData.firstName}} {{requestData.lastName}} data",
          "description": "Ask {{requestData.firstName}} {{requestData.lastName}} to confirm that email address {{requestData.lastName}} and other personal details are correct.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Confirm {{requestData.firstName}} {{requestData.lastName}} email address.",
              "Verify {{requestData.firstName}} {{requestData.lastName}} name and contact details."
            ],
            "fields": [
              {
                "key": "answer",
                "label": "Did you verified all the above ToDos?",
                "mandatory": true
              }
            ]
          }
        },
        {
          "taskId": "policy-acceptance",
          "name": "Confirm Policy Acceptance",
          "description": "Explain Nabarun’s Rules & Regulations, and policies, and confirm that the {{requestData.firstName}} {{requestData.lastName}} agrees to comply.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Explain Nabarun’s Goals, Mission and Activities.",
              "Explain Nabarun’s Rules and Regulations.",
              "Explain the monthly donation scheme.",
              "Send all relevant documents with the {{requestData.firstName}} {{requestData.lastName}}."
            ],
            "fields": [
              {
                "key": "answer",
                "label": "Did you verified all the above ToDos?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "default",
          "nextStepId": "approval"
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "approval",
      "name": "Onboarding Approval",
      "description": "Obtain final approval from authorized leadership before creating the member account.",
      "tasks": [
        {
          "taskId": "verify-approval",
          "name": "President/Secretary Approval",
          "type": "APPROVAL",
          "etaHours": 24,
          "description": "President or Secretary reviews and approves the onboarding request.",
          "taskDetail": {
            "assignedTo": {
              "roleGroup": null,
              "roleNames": [
                "PRESIDENT",
                "VICE_PRESIDENT",
                "SECRETARY",
                "ASST_SECRETARY"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Ensure all verification and policy acceptance steps are complete.",
              "Approve the onboarding of the new member."
            ],
            "fields": [
              {
                "key": "approval",
                "label": "Do you approve the onboarding of the new member?",
                "mandatory": true
              }
            ]
          }
        }
      ],
      "transitions": [
        {
          "condition": "context.step_approval.task_verify-approval.decision === 'APPROVE'",
          "nextStepId": "account-creation"
        },
        {
          "condition": "default",
          "nextStepId": "verification"
        }
      ]
    },
    {
      "isDefault": false,
      "stepId": "account-creation",
      "name": "Account Creation",
      "description": "Automatically create the user account and assign the appropriate system roles.",
      "tasks": [
        {
          "taskId": "create-auth0-user",
          "name": "Create User Account",
          "type": "AUTOMATIC",
          "handler": "Auth0UserCreationHandler",
          "description": "Create the user in the system and assign base roles."
        },
        {
          "taskId": "add-to-whatsapp",
          "name": "Add {{requestData.firstName}} {{requestData.lastName}} to NABARUN'S Official WhatsApp Group",
          "description": "Add {{requestData.firstName}} {{requestData.lastName}} () to NABARUN'S Official WhatsApp Group.",
          "type": "MANUAL",
          "etaHours": 24,
          "taskDetail": {
            "assignedTo": {
              "roleGroups": [],
              "roleNames": [
                "GROUP_COORDINATOR",
                "ASST_GROUP_COORDINATOR"
              ]
            },
            "isAutoCloseable": false,
            "autoCloseCondition": null,
            "checklist": [
              "Confirm {{requestData.firstName}} {{requestData.lastName}} email address.",
              "Verify {{requestData.firstName}} {{requestData.lastName}} name and contact details."
            ],
            "fields": []
          }
        }
      ],
      "transitions": [
        {
          "condition": "default",
          "nextStepId": null
        }
      ]
    }
  ]
}